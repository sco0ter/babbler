<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia Site Renderer 1.11.1 from src\site\markdown/releasenotes.md at 2022-09-26
 | Rendered using Apache Maven Fluido Skin 1.7
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="Date-Revision-yyyymmdd" content="20220926" />
    <meta http-equiv="Content-Language" content="en" />
    <title>XMPP.rocks - Documentation &#x2013; Release Notes</title>
    <link rel="stylesheet" href="./css/apache-maven-fluido-1.7.min.css" />
    <link rel="stylesheet" href="./css/site.css" />
    <link rel="stylesheet" href="./css/print.css" media="print" />
    <script type="text/javascript" src="./js/apache-maven-fluido-1.7.min.js"></script>
  </head>
  <body class="topBarDisabled">
    <div class="container-fluid">
      <div id="banner">
        <div class="pull-left"><div id="bannerLeft"><h2>XMPP.rocks - Documentation</h2>
</div>
</div>
        <div class="pull-right"><div id="bannerRight"><img src="xmpp.png"  alt="XMPP.rocks - Documentation"/></div>
</div>
        <div class="clear"><hr/></div>
      </div>

      <div id="breadcrumbs">
        <ul class="breadcrumb">
        <li id="publishDate">Last Published: 2022-09-26<span class="divider">|</span>
</li>
          <li id="projectVersion">Version: 0.9.0</li>
      <li class="pull-right"><span class="divider">|</span>
<a href="https://bitbucket.org/sco0ter/babbler/downloads" class="externalLink" title="Binaries">Binaries</a></li>
      <li class="pull-right"><a href="https://bitbucket.org/sco0ter/babbler/src" class="externalLink" title="Source Code">Source Code</a></li>
        </ul>
      </div>
      <div class="row-fluid">
        <div id="leftColumn" class="span3">
          <div class="well sidebar-nav">
    <ul class="nav nav-list">
      <li class="nav-header">Project Information</li>
    <li><a href="index.html" title="About"><span class="none"></span>About</a></li>
    <li><a href="xeps.html" title="Supported Specifications"><span class="none"></span>Supported Specifications</a></li>
    <li><a href="license.html" title="License"><span class="none"></span>License</a></li>
    <li><a href="changelog.html" title="Changelog"><span class="none"></span>Changelog</a></li>
    <li class="active"><a href="#"><span class="none"></span>Release Notes</a></li>
      <li class="nav-header">User Guide</li>
    <li><a href="basics.html" title="Getting Started"><span class="none"></span>Getting Started</a></li>
    <li><a href="basic-concepts.html" title="Basic Concepts"><span class="none"></span>Basic Concepts</a></li>
    <li><a href="im.html" title="Contacts, Presence and Messaging"><span class="none"></span>Contacts, Presence and Messaging</a></li>
    <li><a href="extensions.html" title="Using Extensions"><span class="none"></span>Using Extensions</a></li>
    <li><a href="customextensions.html" title="Writing Custom Extensions"><span class="none"></span>Writing Custom Extensions</a></li>
    <li><a href="customiq.html" title="Custom IQs"><span class="none"></span>Custom IQs</a></li>
    <li><a href="customauthentication.html" title="Custom Authentication"><span class="none"></span>Custom Authentication</a></li>
    <li><a href="errors.html" title="Exceptions and XMPP Errors"><span class="none"></span>Exceptions and XMPP Errors</a></li>
    <li><a href="reconnection.html" title="Dis- and Reconnection"><span class="none"></span>Dis- and Reconnection</a></li>
    <li><a href="debugging.html" title="Debugging XMPP Traffic"><span class="none"></span>Debugging XMPP Traffic</a></li>
    <li><a href="buildinstructions.html" title="Build Instructions"><span class="none"></span>Build Instructions</a></li>
      <li class="nav-header">Extension Guide</li>
    <li><a href="xep/filetransfer.html" title="File Transfer"><span class="none"></span>File Transfer</a></li>
    <li><a href="xep/avatar.html" title="Avatars"><span class="none"></span>Avatars</a></li>
    <li><a href="xep/httpbind.html" title="HTTP Binding / BOSH"><span class="none"></span>HTTP Binding / BOSH</a></li>
    <li><a href="xep/externalcomponents.html" title="External Components"><span class="none"></span>External Components</a></li>
    <li><a href="xep/rpc.html" title="XEP-0009: Jabber-RPC"><span class="none"></span>XEP-0009: Jabber-RPC</a></li>
    <li><a href="xep/last.html" title="Last Activity and Idle Time"><span class="none"></span>Last Activity and Idle Time</a></li>
    <li><a href="xep/privacy.html" title="XEP-0016: Privacy Lists"><span class="none"></span>XEP-0016: Privacy Lists</a></li>
    <li><a href="xep/disco.html" title="XEP-0030: Service Discovery"><span class="none"></span>XEP-0030: Service Discovery</a></li>
    <li><a href="xep/muc.html" title="XEP-0045: Multi-User Chat"><span class="none"></span>XEP-0045: Multi-User Chat</a></li>
    <li><a href="xep/bookmarks.html" title="XEP-0048: Bookmarks"><span class="none"></span>XEP-0048: Bookmarks</a></li>
    <li><a href="xep/vcard.html" title="XEP-0054: vcard-temp"><span class="none"></span>XEP-0054: vcard-temp</a></li>
    <li><a href="xep/pubsub.html" title="XEP-0060: Publish-Subscribe"><span class="none"></span>XEP-0060: Publish-Subscribe</a></li>
    <li><a href="xep/xhtmlim.html" title="XEP-0071: XHTML-IM"><span class="none"></span>XEP-0071: XHTML-IM</a></li>
    <li><a href="xep/soap.html" title="XEP-0072: SOAP Over XMPP"><span class="none"></span>XEP-0072: SOAP Over XMPP</a></li>
    <li><a href="xep/amp.html" title="XEP-0079: Advanced Message Processing"><span class="none"></span>XEP-0079: Advanced Message Processing</a></li>
    <li><a href="xep/geoloc.html" title="XEP-0080: User Location"><span class="none"></span>XEP-0080: User Location</a></li>
    <li><a href="xep/version.html" title="XEP-0092: Software Version"><span class="none"></span>XEP-0092: Software Version</a></li>
    <li><a href="xep/rosterx.html" title="XEP-0144: Roster Item Exchange"><span class="none"></span>XEP-0144: Roster Item Exchange</a></li>
    <li><a href="xep/pep.html" title="XEP-0163: Personal Eventing Protocol"><span class="none"></span>XEP-0163: Personal Eventing Protocol</a></li>
    <li><a href="xep/receipts.html" title="XEP-0184: Message Delivery Receipts"><span class="none"></span>XEP-0184: Message Delivery Receipts</a></li>
    <li><a href="xep/time.html" title="XEP-0202: Entity Time"><span class="none"></span>XEP-0202: Entity Time</a></li>
    <li><a href="xep/delay.html" title="XEP-0203: Delayed Delivery"><span class="none"></span>XEP-0203: Delayed Delivery</a></li>
    <li><a href="xep/carbons.html" title="XEP-0280: Message Carbons"><span class="none"></span>XEP-0280: Message Carbons</a></li>
    <li><a href="xep/rtt.html" title="XEP-0301: In-Band Real Time Text"><span class="none"></span>XEP-0301: In-Band Real Time Text</a></li>
    <li><a href="xep/message-correct.html" title="XEP-0308: Last Message Correction"><span class="none"></span>XEP-0308: Last Message Correction</a></li>
      <li class="nav-header">API Documentation</li>
    <li><a href="apidocs/index.html" title="JavaDoc"><span class="none"></span>JavaDoc</a></li>
</ul>
          <hr />
          <div id="poweredBy">
            <div class="clear"></div>
            <div class="clear"></div>
            <div class="clear"></div>
            <div class="clear"></div>
<a href="" title="" class="builtBy"><img class="builtBy"  alt="" src=""    /></a>
            </div>
          </div>
        </div>
        <div id="bodyColumn"  class="span9" >
<h1>Release Notes</h1><section>
<h2><a name="a0.9.0"></a>0.9.0</h2><section>
<h3><a name="Java_11_Support"></a>Java 11 Support</h3>
<p>This release requires Java 11. JAXB has been pulled in as external dependency, since it's no longer part of the JDK.</p></section><section>
<h3><a name="Transport_Connectors"></a>Transport Connectors</h3>
<p>Transport Connectors now let you chose among multiple implementations for a given connection method,
e.g. for TCP binding you can choose between JDK's Socket or Netty's Channel.</p>
<p>See <a href="basic-concepts.html">Basic Concepts</a></p></section></section><section>
<h2><a name="a0.8.0"></a>0.8.0</h2><section>
<h3><a name="New_Project_Structure_and_Modularization"></a>New Project Structure and Modularization</h3>
<p>The following artifacts have been renamed:</p>
<ul>

<li><code>xmpp-core</code> =&gt; <code>xmpp-core-common</code></li>
<li><code>xmpp-extensions</code> =&gt; <code>xmpp-extensions-common</code></li>
<li><code>xmpp-websocket</code> =&gt; <code>xmpp-websocket-common</code> + <code>xmpp-websocket-client</code></li>
</ul>
<p>Experimental work on a server implementation has revealed, that it's useful to have a &#x201c;common&#x201d; module of -let's say- the
WebSocket implementation, which now includes codecs, which can be used likewise by a client and server implementation.
The &#x201c;common&#x201d; artifacts therefore contain code, which could be shared by clients and servers.</p></section><section>
<h3><a name="Jid_is_now_an_interface"></a><code>Jid</code> is now an interface</h3>
<p>Motivation:</p>
<ol style="list-style-type: decimal">

<li>

<p>The old <code>Jid</code> class always constructed a new instance with every call of <code>asBareJid()</code>. The interface now allows to
reference the enclosing class' fields and returning only a &#x201c;bare&#x201d; view of the enclosing <code>Jid</code> instead of creating new
instances. This is a performance improvement to avoid creating too many objects and decreases GC pressure.</p>
</li>
<li>

<p>Jid being an interface allows for more flexibility. E.g. there's now a package-private <code>MalformedJid</code> implementation,
which is internally used during parsing and allows to send a <code>malformed-jid</code> stanza error.</p>
</li>
</ol></section><section>
<h3><a name="Update_PRECIS_to_RFC_8264"></a>Update PRECIS to RFC 8264</h3>
<p>The XMPP Address Format uses PRECIS for internationalizing the local part. The previous <code>Jid</code> implementation
used <a class="externalLink" href="https://tools.ietf.org/html/rfc7564">RFC 7564</a>, which case folded the Jid's local part. The updated PRECIS
specification <a class="externalLink" href="https://tools.ietf.org/html/rfc8264">RFC 8264</a> only lower cases it. This has the following impact:</p>
<p><b>Old</b> <code>Jid</code> behavior:</p>

<div class="source"><pre class="prettyprint"><code class="language-java">Jid jid = Jid.of('fu&#xdf;ball@domain');
// jid.toString() == &quot;fussball@domain&quot;
</code></pre></div>
<p><b>New</b> <code>Jid</code> behavior:</p>

<div class="source"><pre class="prettyprint"><code class="language-java">Jid jid = Jid.of('fu&#xdf;ball@domain');
// jid.toString() == &quot;fu&#xdf;ball@domain&quot;
</code></pre></div></section><section>
<h3><a name="Java_NIO_Support"></a>Java NIO Support</h3>
<p>There's a new artifact <code>xmpp-nio-netty-client</code>, which enables you to use Java NIO for TCP connections using the Netty
framework.</p>
<p>Background: The current (and default) implementation (see <code>TcpConnectionConfiguration</code>) uses two threads per
connection, one for reading, one for writing. This is required, because it uses <code>java.net.Socket</code> internally, which uses
blocking IO. For most client applications this is not an issue and totally acceptable, because clients rarely open
multiple connections.</p>
<p>However, the advantage of NIO is that it doesn't use blocking IO, so now you can use only one (!) thread for a large
number of connections:</p>

<div class="source"><pre class="prettyprint"><code class="language-java">NioEventLoopGroup eventLoopGroup = new NioEventLoopGroup(1);

NettyTcpConnectionConfiguration tcpConnectionConfiguration = NettyTcpConnectionConfiguration.builder()
        .hostname(&quot;localhost&quot;)
        .port(5222)
        .eventLoopGroup(eventLoopGroup)
        .build();

for (int i = 0; i &lt; 100; i++) {
    XmppClient xmppClient = XmppClient.create(&quot;localhost&quot;, configuration, tcpConnectionConfiguration);
    xmppClient.connect();
}
</code></pre></div>
<p>As you can see, you can reuse the same <code>NioEventLoopGroup</code> for multiple connection configurations.</p></section><section>
<h3><a name="XEP-0392:_Consistent_Color_Generation"></a>XEP-0392: Consistent Color Generation</h3>
<p>Sample usage:</p>

<div class="source"><pre class="prettyprint"><code class="language-java">ConsistentColor color = ConsistentColor.generate(input);
float red = color.getRed();
float green = color.getGreen();
float blue = color.getBlue();
</code></pre></div>
<p>(<code>float</code> is used for easier integration with <code>java.awt.Color</code>.)</p></section><section>
<h3><a name="Custom_ThreadFactory"></a>Custom ThreadFactory</h3>
<p>For all threads being started you can now specify a custom thread factory. This might be useful when using this library
in Java EE with a <code>ManagedThreadFactory</code>:</p>

<div class="source"><pre class="prettyprint"><code class="language-java">@Resource
private ManagedThreadFactory mtf;
</code></pre></div>

<div class="source"><pre class="prettyprint"><code class="language-java">XmppSessionConfiguration configuration = XmppSessionConfiguration.builder()
    .threadFactory(mtf)
    .build();
</code></pre></div></section><section>
<h3><a name="Major_API_changes"></a>Major API changes</h3>
<ul>

<li>new <code>rocks.xmpp.core.Text</code> class to represent texts in XMPP (Message, Subjects, Errors). The affected classes use the
new class now.</li>
<li>class <code>rocks.xmpp.core.session.Connection</code> became an interface <code>rocks.xmpp.core.net.Connection</code></li>
<li><code>rocks.xmpp.core.session.ConnectionConfiguration</code> became <code>rocks.xmpp.core.net.client.ClientConnectionConfiguration</code></li>
<li>new enum <code>ChannelEncryption</code> to set the behavior, if, how and when a channel should be encrypted (e.g. direct or via
StartTLS)</li>
<li><code>rocks.xmpp.websocket.WebSocketConnection</code> became <code>rocks.xmpp.websocket.net.client.WebSocketClientConnection</code></li>
<li><code>rocks.xmpp.websocket.WebSocketConnectionConfiguration</code>
became <code>rocks.xmpp.websocket.net.client.WebSocketConnectionConfiguration</code></li>
</ul></section></section>
        </div>
      </div>
    </div>
    <hr/>
    <footer>
      <div class="container-fluid">
        <div class="row-fluid">
            <p>Copyright &copy;2014&#x2013;2022
<a href="http://xmpp.rocks">XMPP.rocks</a>.
All rights reserved.</p>
        </div>
      </div>
    </footer>
  </body>
</html>
